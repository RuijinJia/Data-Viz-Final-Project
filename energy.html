<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>visualization</title>
    <link rel="stylesheet" href="css/style.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<body>
    <div id='container'>
        <div id='header'>
            <div id="headertext">
                <h1>Global Air Quality, Causes and Health Impact</h1>
                <h2>An Analysis of Air Quality on Health Impact</h2>
            </div>
            <div id='navigation'>
                <ul id='navi'>
                    <li><a href="main.html">Overview</a></li>
                    <li><a href="outdoor.html">Ambient pollution</a></li>
                    <li ><a href="indoor.html">Indoor Pollution</a></li>
                    <li class='selected'><a href="energy.html"><b>Sources</b></a></li>
                    <li><a href="trend.html">Solutions</a></li>
                </ul>
            </div>
        </div> 
        <div id='content'>   
            <div class='author'>
                <h3>Author</h3>
                <h4>Ruijin Jia</h4>
                <h5><a href="mailto:rjia58@gwu.edu">rjia58@gwu.edu</a></h5>
                <h5>Instructor: Nima Zahadat</h5>
                <h3>Data Source</h3>
                <ul>
                    <li><a class="selected" href="https://data.worldbank.org/">World Bank Open Data</a></li>
                    <li><a class="selected" href="https://www.who.int/">WHO</a></li>
                    <li><a class="selected" href="https://www.data.gov/">Data Gov</a></li>
                    <li><a class="selected" href="https://dataverse.harvard.edu/dataverse/cga_aqi">Harvard Dataverse</a></li>
                </ul>
            </div>
            <div id='chart'>
                <h1>
                <p>Air pollution happens when aerosols and certain gases end up in our air. The main source of harmful aerosol and gases is fossil fuels. Energy generation is considered to be one of causes of air pollution and the leading cause of global warming emissions. Common types of energy sources led to air pollution are coal, natural gas, and nuclear.   </p>
                </h1>
                <h1>
                    <h2>Global Energy Consumption by Source  </h2>  
                    <div id="energy_div" style="width: 800px; height: 600px;"></div>
            
                <h2>Primary Energy Consumption/(terawatt-hours)</h2>              
                <div class="flourish-embed flourish-scatter" data-src="visualisation/2200163" data-url="https://flo.uri.sh/visualisation/2200163/embed"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
                <h2>Energy intensity of primary energy (kWh/$2011 PPP GDP)</h2>
                <div class="flourish-embed flourish-bar-chart-race" data-src="visualisation/2200678" data-url="https://flo.uri.sh/visualisation/2200678/embed"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
                <P>Energy intensity is an indication of how much energy is used to produce one unit of economic
                    output. </P>
                <h2>Electricity Share by Fuel Source</h2>
                <div class="flourish-embed flourish-chart" data-src="visualisation/2201147" data-url="https://flo.uri.sh/visualisation/2201147/embed"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
            </h1>
            <h1> 
                <p>Indoor pollution is caused by burning solid fuel sources, with GPD per capita increasing, more population is able to access clean cooking fuel</p> 
                <h2>Share of the population Access to Clean Fuels and Technologies for Cooking</h2>
                <div class="flourish-embed flourish-scatter" data-src="visualisation/2202635" data-url="https://flo.uri.sh/visualisation/2202635/embed"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
                <h2>Percentage of Population using Solid Fuels as the Main Cooking Fuel</h2>
                <div id="solid2_div" style="width: 700px; height: 450px;"></div>
            </h1>
                
            </div>
        <div class="footer">
            Copyright &copy 2020
        </div>
        </div>
    </div>

    <script type='text/javascript'>                    var divElement = document.getElementById('viz1588317996370');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>  
    <script type='text/javascript'>                    var divElement = document.getElementById('viz1588319501435');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
    <script type='text/javascript'>                    var divElement = document.getElementById('viz1588379112004');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>

<script type="text/javascript">

    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawAllSheets);
    
    function drawAllSheets() {
        drawSheetName('energy', 'SELECT C,D,E,F,G,H,I', energyResponseHandler);
        drawSheetName('solid2', 'SELECT A,B,C,D,E,F', solid2ResponseHandler);
    }
    function drawSheetName(sheetName, query, responseHandler) {
        var queryString = encodeURIComponent(query);
        var query = new google.visualization.Query(
        'https://docs.google.com/spreadsheets/d/18fpYImxD39zLaAcKrc788-AQndnNij17-nr0X7ditUw//gviz/tq?sheet=' + sheetName + '&headers=1&tq=' +queryString  
        );   
        query.send(responseHandler);
    }

    function energyResponseHandler(response) {
        var data = response.getDataTable();

        var options = {
            width: 800,
            height: 600,
            legend: {position: 'top', maxLines: 1},
            bar: {groupWidth: '75%'},
            isStacked: true
        };

        var chart = new google.visualization.LineChart(
            document.getElementById("energy_div"));
        chart.draw(data, options);
    } 

    function solid2ResponseHandler(response) {

    var data = response.getDataTable();
    var options = {

    	
    chartArea:{left:200,width:'100%',right:200},
    legend: { position: 'right' }};

    var chart = new google.visualization.LineChart(document.getElementById('solid2_div'));
    chart.draw(data, options);
    }    

</script>

</body>
</html>
